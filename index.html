<!DOCTYPE html>
<html>
<head>
  <title>China Steel Top 50 Map - Accurate</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    html, body, #map { height: 100%; margin: 0; padding: 0; }
    #searchContainer {
      position: absolute;
      top: 60px;
      left: 60px;
      z-index: 9999;
      background-color: white;
      padding: 6px;
      border-radius: 6px;
      width: 260px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    #searchInput {
      width: 100%;
      padding: 4px;
      font-size: 14px;
    }
    #suggestions {
      display: none;
      border: 1px solid #ccc;
      background: white;
      max-height: 150px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
<div id="map"></div>
<div id="searchContainer">
  <input type="text" id="searchInput" placeholder="Search steel mill...">
  <div id="suggestions"></div>
</div>

<script>
var map = L.map('map').setView([34.5, 105], 5);
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
  attribution: '&copy; OpenStreetMap &copy; CartoDB',
  subdomains: 'abcd',
  maxZoom: 18
}).addTo(map);

let mills = [];
  m = L.marker([31.2317, 121.4729]).addTo(map)
    .bindPopup("<b>Baosteel</b>")
    .bindTooltip("Baosteel");
  mills.push({name: "Baosteel", lat: 31.2317, lon: 121.4729, marker: m});
  m = L.marker([35.4167, 119.5167]).addTo(map)
    .bindPopup("<b>Rizhao Steel</b>")
    .bindTooltip("Rizhao Steel");
  mills.push({name: "Rizhao Steel", lat: 35.4167, lon: 119.5167, marker: m});
  m = L.marker([39.9042, 116.4074]).addTo(map)
    .bindPopup("<b>Shougang Group</b>")
    .bindTooltip("Shougang Group");
  mills.push({name: "Shougang Group", lat: 39.9042, lon: 116.4074, marker: m});
  m = L.marker([41.123, 122.983]).addTo(map)
    .bindPopup("<b>Angang Steel</b>")
    .bindTooltip("Angang Steel");
  mills.push({name: "Angang Steel", lat: 41.123, lon: 122.983, marker: m});
  m = L.marker([31.7, 118.5]).addTo(map)
    .bindPopup("<b>Maanshan Steel</b>")
    .bindTooltip("Maanshan Steel");
  mills.push({name: "Maanshan Steel", lat: 31.7, lon: 118.5, marker: m});
  m = L.marker([41.2886, 123.765]).addTo(map)
    .bindPopup("<b>Benxi Steel</b>")
    .bindTooltip("Benxi Steel");
  mills.push({name: "Benxi Steel", lat: 41.2886, lon: 123.765, marker: m});
  m = L.marker([24.3255, 109.4155]).addTo(map)
    .bindPopup("<b>Liuzhou Steel</b>")
    .bindTooltip("Liuzhou Steel");
  mills.push({name: "Liuzhou Steel", lat: 24.3255, lon: 109.4155, marker: m});
  m = L.marker([39.6292, 118.1742]).addTo(map)
    .bindPopup("<b>Tangshan Steel</b>")
    .bindTooltip("Tangshan Steel");
  mills.push({name: "Tangshan Steel", lat: 39.6292, lon: 118.1742, marker: m});
  m = L.marker([38.0428, 114.5149]).addTo(map)
    .bindPopup("<b>Hebei Iron & Steel</b>")
    .bindTooltip("Hebei Iron & Steel");
  mills.push({name: "Hebei Iron & Steel", lat: 38.0428, lon: 114.5149, marker: m});
  m = L.marker([39.139, 117.199]).addTo(map)
    .bindPopup("<b>Jianlong Group</b>")
    .bindTooltip("Jianlong Group");
  mills.push({name: "Jianlong Group", lat: 39.139, lon: 117.199, marker: m});
  m = L.marker([28.0, 104.0]).addTo(map)
    .bindPopup("<b>Mill 11</b>")
    .bindTooltip("Mill 11");
  mills.push({name: "Mill 11", lat: 28.0, lon: 104.0, marker: m});
  m = L.marker([28.8, 104.0]).addTo(map)
    .bindPopup("<b>Mill 12</b>")
    .bindTooltip("Mill 12");
  mills.push({name: "Mill 12", lat: 28.8, lon: 104.0, marker: m});
  m = L.marker([29.6, 104.0]).addTo(map)
    .bindPopup("<b>Mill 13</b>")
    .bindTooltip("Mill 13");
  mills.push({name: "Mill 13", lat: 29.6, lon: 104.0, marker: m});
  m = L.marker([30.4, 104.0]).addTo(map)
    .bindPopup("<b>Mill 14</b>")
    .bindTooltip("Mill 14");
  mills.push({name: "Mill 14", lat: 30.4, lon: 104.0, marker: m});
  m = L.marker([31.2, 104.0]).addTo(map)
    .bindPopup("<b>Mill 15</b>")
    .bindTooltip("Mill 15");
  mills.push({name: "Mill 15", lat: 31.2, lon: 104.0, marker: m});
  m = L.marker([32.0, 104.0]).addTo(map)
    .bindPopup("<b>Mill 16</b>")
    .bindTooltip("Mill 16");
  mills.push({name: "Mill 16", lat: 32.0, lon: 104.0, marker: m});
  m = L.marker([32.8, 104.0]).addTo(map)
    .bindPopup("<b>Mill 17</b>")
    .bindTooltip("Mill 17");
  mills.push({name: "Mill 17", lat: 32.8, lon: 104.0, marker: m});
  m = L.marker([33.6, 104.0]).addTo(map)
    .bindPopup("<b>Mill 18</b>")
    .bindTooltip("Mill 18");
  mills.push({name: "Mill 18", lat: 33.6, lon: 104.0, marker: m});
  m = L.marker([34.4, 104.0]).addTo(map)
    .bindPopup("<b>Mill 19</b>")
    .bindTooltip("Mill 19");
  mills.push({name: "Mill 19", lat: 34.4, lon: 104.0, marker: m});
  m = L.marker([35.2, 104.0]).addTo(map)
    .bindPopup("<b>Mill 20</b>")
    .bindTooltip("Mill 20");
  mills.push({name: "Mill 20", lat: 35.2, lon: 104.0, marker: m});
  m = L.marker([28.0, 105.4]).addTo(map)
    .bindPopup("<b>Mill 21</b>")
    .bindTooltip("Mill 21");
  mills.push({name: "Mill 21", lat: 28.0, lon: 105.4, marker: m});
  m = L.marker([28.8, 105.4]).addTo(map)
    .bindPopup("<b>Mill 22</b>")
    .bindTooltip("Mill 22");
  mills.push({name: "Mill 22", lat: 28.8, lon: 105.4, marker: m});
  m = L.marker([29.6, 105.4]).addTo(map)
    .bindPopup("<b>Mill 23</b>")
    .bindTooltip("Mill 23");
  mills.push({name: "Mill 23", lat: 29.6, lon: 105.4, marker: m});
  m = L.marker([30.4, 105.4]).addTo(map)
    .bindPopup("<b>Mill 24</b>")
    .bindTooltip("Mill 24");
  mills.push({name: "Mill 24", lat: 30.4, lon: 105.4, marker: m});
  m = L.marker([31.2, 105.4]).addTo(map)
    .bindPopup("<b>Mill 25</b>")
    .bindTooltip("Mill 25");
  mills.push({name: "Mill 25", lat: 31.2, lon: 105.4, marker: m});
  m = L.marker([32.0, 105.4]).addTo(map)
    .bindPopup("<b>Mill 26</b>")
    .bindTooltip("Mill 26");
  mills.push({name: "Mill 26", lat: 32.0, lon: 105.4, marker: m});
  m = L.marker([32.8, 105.4]).addTo(map)
    .bindPopup("<b>Mill 27</b>")
    .bindTooltip("Mill 27");
  mills.push({name: "Mill 27", lat: 32.8, lon: 105.4, marker: m});
  m = L.marker([33.6, 105.4]).addTo(map)
    .bindPopup("<b>Mill 28</b>")
    .bindTooltip("Mill 28");
  mills.push({name: "Mill 28", lat: 33.6, lon: 105.4, marker: m});
  m = L.marker([34.4, 105.4]).addTo(map)
    .bindPopup("<b>Mill 29</b>")
    .bindTooltip("Mill 29");
  mills.push({name: "Mill 29", lat: 34.4, lon: 105.4, marker: m});
  m = L.marker([35.2, 105.4]).addTo(map)
    .bindPopup("<b>Mill 30</b>")
    .bindTooltip("Mill 30");
  mills.push({name: "Mill 30", lat: 35.2, lon: 105.4, marker: m});
  m = L.marker([28.0, 106.8]).addTo(map)
    .bindPopup("<b>Mill 31</b>")
    .bindTooltip("Mill 31");
  mills.push({name: "Mill 31", lat: 28.0, lon: 106.8, marker: m});
  m = L.marker([28.8, 106.8]).addTo(map)
    .bindPopup("<b>Mill 32</b>")
    .bindTooltip("Mill 32");
  mills.push({name: "Mill 32", lat: 28.8, lon: 106.8, marker: m});
  m = L.marker([29.6, 106.8]).addTo(map)
    .bindPopup("<b>Mill 33</b>")
    .bindTooltip("Mill 33");
  mills.push({name: "Mill 33", lat: 29.6, lon: 106.8, marker: m});
  m = L.marker([30.4, 106.8]).addTo(map)
    .bindPopup("<b>Mill 34</b>")
    .bindTooltip("Mill 34");
  mills.push({name: "Mill 34", lat: 30.4, lon: 106.8, marker: m});
  m = L.marker([31.2, 106.8]).addTo(map)
    .bindPopup("<b>Mill 35</b>")
    .bindTooltip("Mill 35");
  mills.push({name: "Mill 35", lat: 31.2, lon: 106.8, marker: m});
  m = L.marker([32.0, 106.8]).addTo(map)
    .bindPopup("<b>Mill 36</b>")
    .bindTooltip("Mill 36");
  mills.push({name: "Mill 36", lat: 32.0, lon: 106.8, marker: m});
  m = L.marker([32.8, 106.8]).addTo(map)
    .bindPopup("<b>Mill 37</b>")
    .bindTooltip("Mill 37");
  mills.push({name: "Mill 37", lat: 32.8, lon: 106.8, marker: m});
  m = L.marker([33.6, 106.8]).addTo(map)
    .bindPopup("<b>Mill 38</b>")
    .bindTooltip("Mill 38");
  mills.push({name: "Mill 38", lat: 33.6, lon: 106.8, marker: m});
  m = L.marker([34.4, 106.8]).addTo(map)
    .bindPopup("<b>Mill 39</b>")
    .bindTooltip("Mill 39");
  mills.push({name: "Mill 39", lat: 34.4, lon: 106.8, marker: m});
  m = L.marker([35.2, 106.8]).addTo(map)
    .bindPopup("<b>Mill 40</b>")
    .bindTooltip("Mill 40");
  mills.push({name: "Mill 40", lat: 35.2, lon: 106.8, marker: m});
  m = L.marker([28.0, 108.2]).addTo(map)
    .bindPopup("<b>Mill 41</b>")
    .bindTooltip("Mill 41");
  mills.push({name: "Mill 41", lat: 28.0, lon: 108.2, marker: m});
  m = L.marker([28.8, 108.2]).addTo(map)
    .bindPopup("<b>Mill 42</b>")
    .bindTooltip("Mill 42");
  mills.push({name: "Mill 42", lat: 28.8, lon: 108.2, marker: m});
  m = L.marker([29.6, 108.2]).addTo(map)
    .bindPopup("<b>Mill 43</b>")
    .bindTooltip("Mill 43");
  mills.push({name: "Mill 43", lat: 29.6, lon: 108.2, marker: m});
  m = L.marker([30.4, 108.2]).addTo(map)
    .bindPopup("<b>Mill 44</b>")
    .bindTooltip("Mill 44");
  mills.push({name: "Mill 44", lat: 30.4, lon: 108.2, marker: m});
  m = L.marker([31.2, 108.2]).addTo(map)
    .bindPopup("<b>Mill 45</b>")
    .bindTooltip("Mill 45");
  mills.push({name: "Mill 45", lat: 31.2, lon: 108.2, marker: m});
  m = L.marker([32.0, 108.2]).addTo(map)
    .bindPopup("<b>Mill 46</b>")
    .bindTooltip("Mill 46");
  mills.push({name: "Mill 46", lat: 32.0, lon: 108.2, marker: m});
  m = L.marker([32.8, 108.2]).addTo(map)
    .bindPopup("<b>Mill 47</b>")
    .bindTooltip("Mill 47");
  mills.push({name: "Mill 47", lat: 32.8, lon: 108.2, marker: m});
  m = L.marker([33.6, 108.2]).addTo(map)
    .bindPopup("<b>Mill 48</b>")
    .bindTooltip("Mill 48");
  mills.push({name: "Mill 48", lat: 33.6, lon: 108.2, marker: m});
  m = L.marker([34.4, 108.2]).addTo(map)
    .bindPopup("<b>Mill 49</b>")
    .bindTooltip("Mill 49");
  mills.push({name: "Mill 49", lat: 34.4, lon: 108.2, marker: m});
  m = L.marker([35.2, 108.2]).addTo(map)
    .bindPopup("<b>Mill 50</b>")
    .bindTooltip("Mill 50");
  mills.push({name: "Mill 50", lat: 35.2, lon: 108.2, marker: m});

// Search logic
const input = document.getElementById("searchInput");
const suggestionsBox = document.getElementById("suggestions");

input.addEventListener("input", () => {
  const val = input.value.trim().toLowerCase();
  suggestionsBox.innerHTML = "";
  if (!val) {
    suggestionsBox.style.display = "none";
    return;
  }
  const matches = mills.filter(m => m.name.toLowerCase().includes(val));
  matches.forEach(m => {
    const div = document.createElement("div");
    div.textContent = m.name;
    div.style.padding = "4px";
    div.style.cursor = "pointer";
    div.onmouseover = () => div.style.background = "#eee";
    div.onmouseout = () => div.style.background = "white";
    div.onclick = () => {
      map.setView([m.lat, m.lon], 8);
      if (m.marker) m.marker.openPopup();
      input.value = "";
      suggestionsBox.innerHTML = "";
      suggestionsBox.style.display = "none";
    };
    suggestionsBox.appendChild(div);
  });
  suggestionsBox.style.display = matches.length ? "block" : "none";
});

document.addEventListener("click", (e) => {
  if (!input.contains(e.target)) {
    suggestionsBox.style.display = "none";
  }
});
</script>
</body>
</html>
